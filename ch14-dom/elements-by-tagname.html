<!DOCTYPE html>

  <!--The document.getElementsByTagName method returns all child elements
      with a given tag name. Implement your own version of this as a
      function that takes a node and a string (the tag name) as arguments
      and returns an array containing all descendant element nodes with
      the given tag name.
  
      This code can be tested here: https://eloquentjavascript.net/code/#14.2
  -->
  
  <h1>Heading with a <span>span</span> element.</h1>
  <p>A paragraph with <span>one</span>, <span>two</span>
    spans.</p>
  
  <script>
    function byTagName(node, tagName) {
      
      tagName = tagName.toUpperCase();
      let results = [];
  
      function search(node) {
        for (let i = 0; i < node.childNodes.length; i++) {
          let child = node.childNodes[i];
          if (child.nodeType == document.ELEMENT_NODE) {
            if (child.nodeName == tagName) results.push(child);
            search(child);
          }
        }
      }
  
      search(node);
      return results;
    }
  
    console.log(byTagName(document.body, "h1").length);
    // → 1
    console.log(byTagName(document.body, "span").length);
    // → 3
    let para = document.querySelector("p");
    console.log(byTagName(para, "span").length);
    // → 2
  </script>
</html>
